{% extends 'base.html' %}

{% block contenido %}
<div class="p-5 text-light">

    <h2>Match Data for {{ summoner_name }}</h2>
        {% if match_data %}
    <ul>
    {% for match in match_data %}
        <li>Match ID: {{ match.match_id }}</li>
        <li>Champion: {{ match.championName }}</li>
        <li>Kills: {{ match.kills }}</li>
        <li>Assists: {{ match.assists }}</li>
        <li>Deaths: {{ match.deaths }}</li>
        <li>Gold Earned: {{ match.goldEarned }}</li>
        <li>Total Damage Dealt: {{ match.totalDamageDealt }}</li>
        <li>Total Damage Taken: {{ match.totalDamageTaken }}</li>
        <li>Role: {{ match.role }}</li>
        <li>Lane: {{ match.lane }}</li>
        <li>Win: {{ match.win }}</li>
        <button onclick="drawGraph({{ match.kills }}, {{ match.deaths }}, {{ match.assists }}, {{ match.goldEarned }}, {{ match.totalDamageDealt }}, {{ match.totalDamageTaken }}, 'graph{{ forloop.counter }}')">Mostrar Gr√°fico</button>
        <div id="graph{{ forloop.counter }}" class="graph"></div>
        <hr>
    {% endfor %}
    </ul>
    {% else %}
    <p>No match data available.</p>
    {% endif %}

</div>
{% endblock %}
{% block scripts %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-sparklines/2.1.2/jquery.sparkline.min.js"></script>
<script>
{% verbatim %}
function drawGraph(kills, deaths, assists, goldEarned, totalDamageDealt, totalDamageTaken, elementId) {
    var data = [kills, deaths, assists, goldEarned, totalDamageDealt, totalDamageTaken];
    $('#' + elementId).sparkline(data, {
        type: 'bar',
        barColor: '#00bbef',
        height: '300px',
        barWidth: '150',
        barSpacing: '5',
        chartRangeMin: 1,
        chartRangeMax: 30000,
        tooltipFormat: '{{offset:offset}}: {{value}}',
        tooltipValueLookups: {
            'offset': {
                0: 'Kills',
                1: 'Deaths',
                2: 'Assists',
                3: 'Gold Earned',
                4: 'Total Damage Dealt',
                5: 'Total Damage Taken'
            }
        }
    });
}
{% endverbatim %}
</script>
{% endblock %}
