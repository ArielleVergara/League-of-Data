{% extends 'base.html' %}

{% block contenido %}
<div class="p-5 text-light">

    <h2>Match Data for {{ summoner.summoner_name }}</h2>
    
    <div class="text-center">
        
        <p>[Profile Image] <br>Perfil</p>
        <p>División/Rango: {{ tier }} {{ rank }}</p>
        <p>Total Partidas Ganadas: {{ total_wins }}</p>
        <p>Total Partidas Perdidas: {{ total_losses }}</p>
        <p>Ratio de Victorias: {{ winrate }}%</p>
    </div>
    <br><br>
    {% if match_data %}
    <div class="row">
        <div class="col-md-6">
            <h5 class="text-center">-Ultimas Partidas-</h5>
            <ul>
                {% for match in match_data %}
                <p>Detalles Partida</p>
                    <li>ID de Partida: {{ match.match_id }}</li>
                    <li>Campeón: {{ match.championName }}</li>
                    <li>Asesinatos: {{ match.kills }}</li>
                    <li>Asistencias: {{ match.assists }}</li>
                    <li>Muertes: {{ match.deaths }}</li>
                    <li>Oro Total Obtenido: {{ match.goldEarned }}</li>
                    <li>Daño Total Infligido: {{ match.totalDamageDealt }}</li>
                    <li>Daño Total Recibido: {{ match.totalDamageTaken }}</li>
                    <li>Rol: {{ match.role }}</li>
                    <li>Linea: {{ match.lane }}</li>
                    <li>Ganada: {{ match.win }}</li>
                    <hr>
                {% endfor %}
            </ul>
        </div>
        <div class="col-md-6">
            {% for match in match_data %}
                {% with match_id=match.match_id %}
                    <p>Gráficos Generados</p>
                    <div>
                        <img src="{% url 'plot_image' match_id=match.match_id graph_type='dano' %}" alt="Gráfico de Daño">
                        <img src="{% url 'plot_image' match_id=match.match_id graph_type='exp' %}" alt="Gráfico de Experiencia">
                        <img src="{% url 'plot_image' match_id=match.match_id graph_type='minions' %}" alt="Gráfico de Minions">
                        <img src="{% url 'plot_image' match_id=match.match_id graph_type='nivel' %}" alt="Gráfico de Nivel">
                        <img src="{% url 'plot_image' match_id=match.match_id graph_type='oro' %}" alt="Gráfico de Oro">
                    </div>
                    <ul>
                    {% for time in match.time_info %}
                        <li>Minuto: {{ time.minute }}</li>
                        <li>Oro: {{ time.gold }}</li>
                        <li>XP: {{ time.xp }}</li>
                        <li>Minions: {{ time.minions }}</li>
                        <li>Nivel: {{ time.level }}</li>
                    {% endfor %}
                    </ul>
                {% endwith %}
            {% endfor %}
        </div>
    </div>
    {% else %}
        <p>No match data available.</p>
    {% endif %}
</div>
{% endblock %}

